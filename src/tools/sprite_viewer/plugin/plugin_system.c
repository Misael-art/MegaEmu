#include "plugin/plugin_system.h"#include "core/memory.h"static PluginRegistry* registry = NULL;void plugin_system_init(void) {    registry = mem_alloc(sizeof(PluginRegistry));    registry->plugin_count = 0;    registry->capacity = INITIAL_PLUGIN_CAPACITY;    registry->plugins = mem_alloc(sizeof(Plugin*) * registry->capacity);}PluginHandle plugin_load(const char* path) {    Plugin* plugin = mem_alloc(sizeof(Plugin));        // Carrega biblioteca dinÃ¢mica    plugin->handle = platform_load_library(path);    if (!plugin->handle) return INVALID_PLUGIN_HANDLE;        // Inicializa plugin    plugin->callbacks.init = platform_get_proc_address(plugin->handle, "plugin_init");    plugin->callbacks.shutdown = platform_get_proc_address(plugin->handle, "plugin_shutdown");        if (plugin->callbacks.init) {        plugin->callbacks.init();    }        // Registra no sistema    registry_add_plugin(registry, plugin);    return (PluginHandle)plugin;}
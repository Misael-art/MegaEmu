#include "plugin/dependency_manager.h"#include "core/memory.h"#include "core/hash_table.h"static HashTable* dependency_graph = NULL;void dependency_manager_init(void) {    dependency_graph = hash_table_create(128);}bool dependency_add(Plugin* plugin, PluginDependency* deps, size_t count) {    PluginDependencyNode* node = mem_alloc(sizeof(PluginDependencyNode));    node->plugin = plugin;    node->dependencies = mem_alloc(sizeof(PluginDependency) * count);    node->dependency_count = count;    node->is_satisfied = false;        memcpy(node->dependencies, deps, sizeof(PluginDependency) * count);        return hash_table_insert(dependency_graph, plugin->id, node);}void dependency_resolve_all(void) {    HashTableIterator it;    hash_table_iterator_init(&it, dependency_graph);        while (hash_table_iterator_next(&it)) {        PluginDependencyNode* node = it.value;        bool all_satisfied = true;                for (size_t i = 0; i < node->dependency_count; i++) {            PluginDependency* dep = &node->dependencies[i];            if (!plugin_manager_has_plugin(dep->plugin_id)) {                if (!dep->optional) {                    all_satisfied = false;                    if (node->callbacks.on_dependency_error) {                        node->callbacks.on_dependency_error(                            dep->plugin_id,                            "Dependency not found"                        );                    }                }            }        }                node->is_satisfied = all_satisfied;    }}
typedef struct {    uint8_t* pattern_data;    size_t data_size;    ColorFormat format;        struct {        float similarity_threshold;        uint32_t min_sprite_size;        uint32_t max_sprite_size;        bool detect_duplicates;    } config;} SpriteDetector;SpriteMetadata* analyze_sprite_patterns(SpriteDetector* detector) {    // Análise de padrões usando machine learning    SpritePatternAnalyzer* analyzer = pattern_analyzer_create();    pattern_analyzer_train(analyzer, detector->pattern_data);        // Detecção de características    SpriteFeatures* features = extract_sprite_features(        detector->pattern_data,        detector->data_size,        detector->format    );        // Agrupamento de sprites similares    SpriteCluster* clusters = cluster_similar_sprites(        features,        detector->config.similarity_threshold    );        // Remoção de duplicatas    if (detector->config.detect_duplicates) {        remove_duplicate_sprites(clusters);    }        // Geração de metadados    SpriteMetadata* metadata = generate_sprite_metadata(clusters);        // Limpeza    pattern_analyzer_destroy(analyzer);    free(features);    free(clusters);        return metadata;}
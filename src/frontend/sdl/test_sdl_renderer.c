#include "sdl_game_renderer.h"#include <stdio.h>#include <stdlib.h>#include <time.h>// Gerar um padrão de teste coloridostatic void generate_test_pattern(uint32_t *buffer, int width, int height){    for (int y = 0; y < height; y++)    {        for (int x = 0; x < width; x++)        {            uint8_t r = (x * 255) / width;            uint8_t g = (y * 255) / height;            uint8_t b = ((x + y) * 255) / (width + height);            buffer[y * width + x] = (0xFF << 24) | (r << 16) | (g << 8) | b;        }    }}int main(int argc, char *argv[]){    printf("Iniciando teste do renderizador SDL2...\n");    // Configurar renderizador    sdl_renderer_config_t config = {        .window_width = 800,        .window_height = 600,        .game_width = 256,        .game_height = 240,        .scale_factor = 2.0f,        .vsync_enabled = true,        .fullscreen = false,        .smooth_scaling = false,        .integer_scaling = true};    // Criar renderizador    sdl_game_renderer_t renderer = {0};    if (!sdl_game_renderer_init(&renderer, &config))    {        fprintf(stderr, "Erro ao inicializar renderizador\n");        return 1;    }    printf("Renderizador inicializado com sucesso\n");    // Alocar buffer de teste    uint32_t *test_buffer = malloc(config.game_width * config.game_height * sizeof(uint32_t));    if (!test_buffer)    {        fprintf(stderr, "Erro ao alocar buffer de teste\n");        sdl_game_renderer_shutdown(&renderer);        return 1;    }    // Gerar padrão de teste inicial    generate_test_pattern(test_buffer, config.game_width, config.game_height);    // Loop principal    bool running = true;    SDL_Event event;    uint32_t frame_count = 0;    uint32_t last_time = SDL_GetTicks();    float fps = 0.0f;    printf("Iniciando loop de teste...\n");    printf("Controles:\n");    printf("  ESC - Sair\n");    printf("  F11 - Alternar tela cheia\n");    printf("  S   - Alternar suavização\n");    printf("  I   - Alternar escala inteira\n");    printf("  +/- - Ajustar escala\n");    while (running)    {        // Processar eventos        while (SDL_PollEvent(&event))        {            switch (event.type)            {            case SDL_QUIT:                running = false;                break;            case SDL_KEYDOWN:                switch (event.key.keysym.sym)                {                case SDLK_ESCAPE:                    running = false;                    break;                case SDLK_F11:                    sdl_game_renderer_toggle_fullscreen(&renderer);                    break;                case SDLK_s:                    config.smooth_scaling = !config.smooth_scaling;                    sdl_game_renderer_set_config(&renderer, &config);                    break;                case SDLK_i:                    config.integer_scaling = !config.integer_scaling;                    sdl_game_renderer_set_config(&renderer, &config);                    break;                case SDLK_PLUS:                case SDLK_KP_PLUS:                    if (config.scale_factor < 4.0f)                    {                        config.scale_factor += 0.5f;                        sdl_game_renderer_set_scale(&renderer, config.scale_factor);                    }                    break;                case SDLK_MINUS:                case SDLK_KP_MINUS:                    if (config.scale_factor > 1.0f)                    {                        config.scale_factor -= 0.5f;                        sdl_game_renderer_set_scale(&renderer, config.scale_factor);                    }                    break;                }                break;            case SDL_WINDOWEVENT:                if (event.window.event == SDL_WINDOWEVENT_RESIZED)                {                    sdl_game_renderer_handle_resize(&renderer,                                                    event.window.data1,                                                    event.window.data2);                }                break;            }        }        // Atualizar FPS        frame_count++;        uint32_t current_time = SDL_GetTicks();        uint32_t frame_time = current_time - last_time;        if (frame_time >= 1000)        {            fps = frame_count * 1000.0f / frame_time;            frame_count = 0;            last_time = current_time;            // Atualizar título com FPS            char title[64];            snprintf(title, sizeof(title), "SDL2 Renderer Test - %.1f FPS", fps);            SDL_SetWindowTitle(renderer.window, title);        }        // Renderizar frame        sdl_game_renderer_begin_frame(&renderer);        sdl_game_renderer_update_game_texture(&renderer, test_buffer);        sdl_game_renderer_end_frame(&renderer);        // Pequeno delay para não sobrecarregar a CPU        SDL_Delay(1);    }    // Limpar    free(test_buffer);    sdl_game_renderer_shutdown(&renderer);    printf("Teste finalizado com sucesso\n");    return 0;}